<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Surron Squad</title>
  <link rel="stylesheet" href="surron_squad.css">
  <link rel="stylesheet" href=".staged files/style/components.css">
  <script>
    // Handle CSS paths for different environments
    document.addEventListener('DOMContentLoaded', function() {
      const baseUrl = window.location.pathname.includes('/surron_build/') ? 
                     '' : 
                     '/surron_build/';
      
      // Update CSS links if needed
      document.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
        if (!link.href.startsWith('http')) {
          const currentHref = link.getAttribute('href');
          if (!currentHref.startsWith('/') && !currentHref.startsWith('./')) {
            link.href = baseUrl + currentHref;
          }
        }
      });
    });
  </script>
</head>
<body class="surron-squad-theme">
  <header>
    <nav class="main-nav">
      <div class="logo">SURRON SQUAD</div>
      <div class="nav-links">
        <a href="#squad-dashboard">Squad</a>
        <a href="#quest-board">Quests</a>
        <a href="#build-selector">Build</a>
        <a href="#fishing-ui">Fishing</a>
      </div>
    </nav>
  </header>
  
  <main class="game-container">
    <section id="squad-dashboard" class="game-section"></section>
    <section id="quest-board" class="game-section"></section>
    <section id="build-selector" class="game-section"></section>
    <section id="fishing-ui" class="game-section"></section>
    <section id="adventure-engine" class="game-section"></section>
  </main>
  
  <script type="module">
    // Define base URL for imports
    const BASE_URL = new URL(import.meta.url).pathname.includes('/surron_build/') ? 
                    './' : 
                    '/surron_build/';
    console.log("Using base URL for imports:", BASE_URL);
    
    // Determine component paths based on URL
    const COMPONENT_PATH = BASE_URL + '.staged files/components/';
    
    // Dynamic imports to handle path differences
    const SquadDashboard = (await import(`${COMPONENT_PATH}SquadDashboard.js`)).default;
    const QuestBoardComponent = (await import(`${COMPONENT_PATH}QuestBoardComponent.js`)).default;
    const BuildSelectorComponent = (await import(`${COMPONENT_PATH}BuildSelectorComponent.js`)).default;
    const FishingComponent = (await import(`${COMPONENT_PATH}FishingComponent.js`)).default;
    const AdventureEngineComponent = (await import(`${COMPONENT_PATH}AdventureEngineComponent.js`)).default;
    
    // Game components
    let dashboardComponent, questBoardComponent, buildSelectorComponent, fishingComponent, adventureComponent;
    
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Initializing Surron Squad game components...');
      
      // Initialize components
      try {
        dashboardComponent = new SquadDashboard();
        dashboardComponent.mount(document.getElementById('squad-dashboard'));
        
        questBoardComponent = new QuestBoardComponent();
        questBoardComponent.mount(document.getElementById('quest-board'));
        
        buildSelectorComponent = new BuildSelectorComponent();
        buildSelectorComponent.mount(document.getElementById('build-selector'));
        
        fishingComponent = new FishingComponent();
        fishingComponent.mount(document.getElementById('fishing-ui'));
        
        adventureComponent = new AdventureEngineComponent();
        adventureComponent.mount(document.getElementById('adventure-engine'));
        
        console.log('All components initialized successfully');
      } catch (error) {
        console.error('Error initializing components:', error);
      }
    });
    
    // Clean up on page unload
    window.addEventListener('unload', () => {
      if (dashboardComponent) dashboardComponent.unmount();
      if (questBoardComponent) questBoardComponent.unmount();
      if (buildSelectorComponent) buildSelectorComponent.unmount();
      if (fishingComponent) fishingComponent.unmount();
      if (adventureComponent) adventureComponent.unmount();
    });
  </script>
</body>
</html>
